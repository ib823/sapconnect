/**
 * Data Model Simplification Rules
 *
 * Covers: BKPF restructuring, removed/replaced tables (BSEG, BSID, BSIK,
 * BSAD, BSAK, KONV, KONP, VBFA, etc.), compatibility views and their
 * limitations, CDS view replacements, ACDOCA universal journal,
 * material document changes, condition contract changes, partner function
 * tables, output management tables, EKKO/EKPO, VBAK/VBAP, MKPF/MSEG,
 * CKMLHD/CKMLCT, CO-PA, and more.
 */

module.exports = [
  {
    id: 'SIMPL-DM-001',
    category: 'Data Model',
    severity: 'high',
    title: 'BKPF header table restructured',
    description: 'BKPF has structural changes. Some fields moved to ACDOCA.',
    pattern: /\bBKPF\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_JournalEntry for document headers. Review field-level changes.',
    simplificationId: 'S4TWL-DM-001',
  },
  {
    id: 'SIMPL-DM-002',
    category: 'Data Model',
    severity: 'medium',
    title: 'EKKO purchase order header changes',
    description: 'EKKO has new fields and some removed fields in S/4HANA.',
    pattern: /\bEKKO\b/i,
    patternType: 'source',
    remediation: 'Review EKKO field usage against S/4HANA data model.',
    simplificationId: 'S4TWL-DM-002',
  },
  {
    id: 'SIMPL-DM-003',
    category: 'Data Model',
    severity: 'medium',
    title: 'EKPO purchase order item changes',
    description: 'EKPO has structural changes including new fields for ML integration.',
    pattern: /\bEKPO\b/i,
    patternType: 'source',
    remediation: 'Review EKPO field usage. Note MATNR length change to 40.',
    simplificationId: 'S4TWL-DM-003',
  },
  {
    id: 'SIMPL-DM-004',
    category: 'Data Model',
    severity: 'medium',
    title: 'VBAK sales order header changes',
    description: 'VBAK has structural changes in S/4HANA.',
    pattern: /\bVBAK\b/i,
    patternType: 'source',
    remediation: 'Review VBAK field usage. Use API_SALES_ORDER_SRV for new developments.',
    simplificationId: 'S4TWL-DM-004',
  },
  {
    id: 'SIMPL-DM-005',
    category: 'Data Model',
    severity: 'medium',
    title: 'VBAP sales order item changes',
    description: 'VBAP has structural changes including MATNR length extension.',
    pattern: /\bVBAP\b/i,
    patternType: 'source',
    remediation: 'Review VBAP field usage. Note MATNR length change to 40.',
    simplificationId: 'S4TWL-DM-005',
  },
  {
    id: 'SIMPL-DM-006',
    category: 'Data Model',
    severity: 'medium',
    title: 'MKPF material document header changes',
    description: 'MKPF has structural changes in S/4HANA.',
    pattern: /\bMKPF\b/i,
    patternType: 'source',
    remediation: 'Review MKPF field usage. Use CDS views I_MaterialDocumentHeader.',
    simplificationId: 'S4TWL-DM-006',
  },
  {
    id: 'SIMPL-DM-007',
    category: 'Data Model',
    severity: 'medium',
    title: 'MSEG material document item changes',
    description: 'MSEG has structural changes in S/4HANA including ML integration fields.',
    pattern: /\bMSEG\b/i,
    patternType: 'source',
    remediation: 'Review MSEG field usage. Use CDS views I_MaterialDocumentItem.',
    simplificationId: 'S4TWL-DM-007',
  },
  {
    id: 'SIMPL-DM-008',
    category: 'Data Model',
    severity: 'high',
    title: 'CO-PA operating concern restructured',
    description: 'CE1*/CE2*/CE3*/CE4* tables replaced by ACDOCA margin analysis.',
    pattern: /\b(CE1\w+|CE2\w+|CE3\w+|CE4\w+)\b/,
    patternType: 'source',
    remediation: 'Use ACDOCA-based margin analysis or CDS views for profitability.',
    simplificationId: 'S4TWL-DM-008',
  },
  {
    id: 'SIMPL-DM-009',
    category: 'Data Model',
    severity: 'medium',
    title: 'Material Ledger tables restructured',
    description: 'CKMLHD, CKMLCT, CKMLPP restructured for mandatory ML.',
    pattern: /\b(CKMLHD|CKMLCT|CKMLPP)\b/i,
    patternType: 'source',
    remediation: 'Review actual costing data model. Use CDS views I_ActualCostRate*.',
    simplificationId: 'S4TWL-DM-009',
  },
  {
    id: 'SIMPL-DM-010',
    category: 'Data Model',
    severity: 'high',
    title: 'COEP CO line items replaced',
    description: 'COEP (CO actual line items) replaced by ACDOCA for CO postings.',
    pattern: /\bCOEP\b/i,
    patternType: 'source',
    remediation: 'Use ACDOCA for CO line items or CDS views I_CostCenterActualData.',
    simplificationId: 'S4TWL-DM-010',
  },
  {
    id: 'SIMPL-DM-011',
    category: 'Data Model',
    severity: 'medium',
    title: 'LIKP delivery header changes',
    description: 'LIKP has structural changes. Some fields deprecated.',
    pattern: /\bLIKP\b/i,
    patternType: 'source',
    remediation: 'Review LIKP field usage. Use API_OUTBOUND_DELIVERY_SRV.',
    simplificationId: 'S4TWL-DM-011',
  },
  {
    id: 'SIMPL-DM-012',
    category: 'Data Model',
    severity: 'medium',
    title: 'LIPS delivery item changes',
    description: 'LIPS has structural changes including MATNR extension.',
    pattern: /\bLIPS\b/i,
    patternType: 'source',
    remediation: 'Review LIPS field usage. Note MATNR length change.',
    simplificationId: 'S4TWL-DM-012',
  },
  {
    id: 'SIMPL-DM-013',
    category: 'Data Model',
    severity: 'high',
    title: 'COBK CO document header removed',
    description: 'COBK replaced by ACDOCA for CO document headers.',
    pattern: /\bCOBK\b/i,
    patternType: 'source',
    remediation: 'Use ACDOCA for CO document data.',
    simplificationId: 'S4TWL-DM-013',
  },
  // ── Rules 014–045: expanded coverage ──
  {
    id: 'SIMPL-DM-014',
    category: 'Data Model',
    severity: 'critical',
    title: 'BSEG accounting document line items replaced',
    description: 'BSEG (accounting document segment table) is replaced by ACDOCA in S/4HANA. BSEG exists only as a compatibility view with significant performance limitations. Aggregate queries on BSEG will be extremely slow.',
    pattern: /\bBSEG\b/i,
    patternType: 'source',
    remediation: 'Replace BSEG access with ACDOCA or CDS view I_JournalEntryItem. For line item reports use I_GLAccountLineItem.',
    simplificationId: 'S4TWL-DM-014',
  },
  {
    id: 'SIMPL-DM-015',
    category: 'Data Model',
    severity: 'critical',
    title: 'BSID customer open items replaced',
    description: 'BSID (customer open items index) is replaced by ACDOCA. The table exists only as a compatibility view. All open item queries must use ACDOCA or CDS views.',
    pattern: /\bBSID\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_JournalEntryItem with customer filter or I_OperationalAcctgDocItem. For open items use clearing status in ACDOCA.',
    simplificationId: 'S4TWL-DM-015',
  },
  {
    id: 'SIMPL-DM-016',
    category: 'Data Model',
    severity: 'critical',
    title: 'BSIK vendor open items replaced',
    description: 'BSIK (vendor open items index) is replaced by ACDOCA. The table exists only as a compatibility view with performance limitations.',
    pattern: /\bBSIK\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_JournalEntryItem with vendor filter or I_OperationalAcctgDocItem. For open items use clearing status in ACDOCA.',
    simplificationId: 'S4TWL-DM-016',
  },
  {
    id: 'SIMPL-DM-017',
    category: 'Data Model',
    severity: 'critical',
    title: 'BSAD customer cleared items replaced',
    description: 'BSAD (customer cleared items index) is replaced by ACDOCA. The table exists only as a compatibility view.',
    pattern: /\bBSAD\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_JournalEntryItem with customer and clearing filters. Query ACDOCA with AUGDT (clearing date) populated.',
    simplificationId: 'S4TWL-DM-017',
  },
  {
    id: 'SIMPL-DM-018',
    category: 'Data Model',
    severity: 'critical',
    title: 'BSAK vendor cleared items replaced',
    description: 'BSAK (vendor cleared items index) is replaced by ACDOCA. The table exists only as a compatibility view.',
    pattern: /\bBSAK\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_JournalEntryItem with vendor and clearing filters. Query ACDOCA with AUGDT (clearing date) populated.',
    simplificationId: 'S4TWL-DM-018',
  },
  {
    id: 'SIMPL-DM-019',
    category: 'Data Model',
    severity: 'critical',
    title: 'BSIS GL open items replaced',
    description: 'BSIS (GL account open items index) is replaced by ACDOCA. All GL line item queries should target ACDOCA.',
    pattern: /\bBSIS\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_GLAccountLineItem or I_JournalEntryItem for GL line items from ACDOCA.',
    simplificationId: 'S4TWL-DM-019',
  },
  {
    id: 'SIMPL-DM-020',
    category: 'Data Model',
    severity: 'critical',
    title: 'BSAS GL cleared items replaced',
    description: 'BSAS (GL account cleared items index) is replaced by ACDOCA. The table exists only as a compatibility view.',
    pattern: /\bBSAS\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_GLAccountLineItem with clearing status filter on ACDOCA.',
    simplificationId: 'S4TWL-DM-020',
  },
  {
    id: 'SIMPL-DM-021',
    category: 'Data Model',
    severity: 'high',
    title: 'GLT0 GL totals table replaced',
    description: 'GLT0 (GL account totals) is replaced by ACDOCA aggregation. The table exists as a compatibility view.',
    pattern: /\bGLT0\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_GLAccountBalance or aggregate from ACDOCA. FAGLFLEXT is also a compatibility view.',
    simplificationId: 'S4TWL-DM-021',
  },
  {
    id: 'SIMPL-DM-022',
    category: 'Data Model',
    severity: 'high',
    title: 'FAGLFLEXT new GL totals table replaced',
    description: 'FAGLFLEXT (new GL account totals) is replaced by ACDOCA aggregation. Exists as a compatibility view with limited performance.',
    pattern: /\bFAGLFLEXT\b/i,
    patternType: 'source',
    remediation: 'Use CDS view I_GLAccountBalance for GL totals. Aggregate directly from ACDOCA for custom reports.',
    simplificationId: 'S4TWL-DM-022',
  },
  {
    id: 'SIMPL-DM-023',
    category: 'Data Model',
    severity: 'high',
    title: 'KONV condition record table replaced',
    description: 'KONV (sales document conditions) is replaced by PRCD_ELEMENTS in S/4HANA. KONV exists only as a compatibility view.',
    pattern: /\bKONV\b/i,
    patternType: 'source',
    remediation: 'Use PRCD_ELEMENTS for pricing conditions. Use CDS view I_SlsDocPricingElement or I_BillingDocPricingElement.',
    simplificationId: 'S4TWL-DM-023',
  },
  {
    id: 'SIMPL-DM-024',
    category: 'Data Model',
    severity: 'high',
    title: 'KONP condition item table replaced',
    description: 'KONP (condition item details) is replaced by PRCD_ELEMENTS in S/4HANA. Direct access to KONP will hit a compatibility view.',
    pattern: /\bKONP\b/i,
    patternType: 'source',
    remediation: 'Use PRCD_ELEMENTS for condition details. Access via I_SlsDocPricingElement CDS view.',
    simplificationId: 'S4TWL-DM-024',
  },
  {
    id: 'SIMPL-DM-025',
    category: 'Data Model',
    severity: 'medium',
    title: 'KONH condition header table replaced',
    description: 'KONH (condition header) is replaced by PRCD_ELEMENTS. Access to KONH will use a compatibility view.',
    pattern: /\bKONH\b/i,
    patternType: 'source',
    remediation: 'Use PRCD_ELEMENTS for condition header data. Use CDS views for pricing element access.',
    simplificationId: 'S4TWL-DM-025',
  },
  {
    id: 'SIMPL-DM-026',
    category: 'Data Model',
    severity: 'high',
    title: 'VBFA document flow table changes',
    description: 'VBFA (sales document flow) has structural changes in S/4HANA. Some fields deprecated and new fields added for advanced ATP and other features.',
    pattern: /\bVBFA\b/i,
    patternType: 'source',
    remediation: 'Review VBFA field usage. Use CDS view I_SalesDocumentFlow or API_SALES_ORDER_SRV for document flow.',
    simplificationId: 'S4TWL-DM-026',
  },
  {
    id: 'SIMPL-DM-027',
    category: 'Data Model',
    severity: 'critical',
    title: 'ACDOCA universal journal table',
    description: 'ACDOCA is the single source of truth for all financial postings in S/4HANA. It merges FI, CO, ML, CO-PA, and asset accounting line items into one table.',
    pattern: /\bACDOCA\b/i,
    patternType: 'source',
    remediation: 'ACDOCA is the target table. Use CDS views I_JournalEntry, I_JournalEntryItem for access. Design custom reports on ACDOCA.',
    simplificationId: 'S4TWL-DM-027',
  },
  {
    id: 'SIMPL-DM-028',
    category: 'Data Model',
    severity: 'high',
    title: 'ACDOCP plan data table',
    description: 'ACDOCP stores plan data in S/4HANA universal journal. Replaces COSP (CO plan line items) and plan totals tables.',
    pattern: /\bACDOCP\b/i,
    patternType: 'source',
    remediation: 'Use ACDOCP for plan data access. Use CDS view I_JournalEntryItemPlan for plan reporting.',
    simplificationId: 'S4TWL-DM-028',
  },
  {
    id: 'SIMPL-DM-029',
    category: 'Data Model',
    severity: 'high',
    title: 'COSP CO plan totals replaced',
    description: 'COSP (CO plan totals per cost element) is replaced by ACDOCP in S/4HANA. COSP exists as a compatibility view.',
    pattern: /\bCOSP\b/i,
    patternType: 'source',
    remediation: 'Use ACDOCP for CO plan data. Use CDS view I_CostCenterPlanData for plan reporting.',
    simplificationId: 'S4TWL-DM-029',
  },
  {
    id: 'SIMPL-DM-030',
    category: 'Data Model',
    severity: 'high',
    title: 'COSS CO actual totals replaced',
    description: 'COSS (CO actual totals per cost element) is replaced by ACDOCA in S/4HANA. COSS exists as a compatibility view.',
    pattern: /\bCOSS\b/i,
    patternType: 'source',
    remediation: 'Use ACDOCA for CO actual data. Use CDS view I_CostCenterActualData for actual reporting.',
    simplificationId: 'S4TWL-DM-030',
  },
  {
    id: 'SIMPL-DM-031',
    category: 'Data Model',
    severity: 'high',
    title: 'Compatibility views have performance limitations',
    description: 'Compatibility views (BSEG, BSID, BSIK, BSAD, BSAK, GLT0, etc.) are built on top of ACDOCA. They have serious performance limitations, especially for aggregate queries and large data volumes.',
    pattern: /\b(SELECT\s+(?:SUM|COUNT|AVG|MAX|MIN)\s*\(.*\)\s+FROM\s+(?:BSEG|BSID|BSIK|BSAD|BSAK|BSIS|BSAS|GLT0|FAGLFLEXT))\b/i,
    patternType: 'source',
    remediation: 'Replace aggregate queries on compatibility views with ACDOCA-based CDS views. Performance degradation can be 10-100x on compatibility views.',
    simplificationId: 'S4TWL-DM-031',
  },
  {
    id: 'SIMPL-DM-032',
    category: 'Data Model',
    severity: 'high',
    title: 'ANLA/ANLP asset tables restructured',
    description: 'ANLA (asset master) and ANLP (asset periodic values) are restructured. Asset depreciation areas integrated with ACDOCA.',
    pattern: /\b(ANLA|ANLP|ANLC|ANLZ|ANEK)\b/i,
    patternType: 'source',
    remediation: 'Use CDS views I_FixedAsset, I_AssetDepreciationArea. Asset values are also in ACDOCA (BSTAT = A).',
    simplificationId: 'S4TWL-DM-032',
  },
  {
    id: 'SIMPL-DM-033',
    category: 'Data Model',
    severity: 'medium',
    title: 'RBKP invoice document header changes',
    description: 'RBKP (incoming invoice header) has structural changes in S/4HANA. Some fields are deprecated.',
    pattern: /\bRBKP\b/i,
    patternType: 'source',
    remediation: 'Review RBKP field usage. Use API_SUPPLIERINVOICE_PROCESS_SRV for new invoice processing.',
    simplificationId: 'S4TWL-DM-033',
  },
  {
    id: 'SIMPL-DM-034',
    category: 'Data Model',
    severity: 'medium',
    title: 'RSEG invoice document item changes',
    description: 'RSEG (incoming invoice item) has structural changes including MATNR length extension.',
    pattern: /\bRSEG\b/i,
    patternType: 'source',
    remediation: 'Review RSEG field usage. Note MATNR length change to 40. Use I_SupplierInvoiceItem CDS view.',
    simplificationId: 'S4TWL-DM-034',
  },
  {
    id: 'SIMPL-DM-035',
    category: 'Data Model',
    severity: 'high',
    title: 'VBRK billing document header changes',
    description: 'VBRK (billing document header) has structural changes. Pricing conditions moved to PRCD_ELEMENTS.',
    pattern: /\bVBRK\b/i,
    patternType: 'source',
    remediation: 'Review VBRK field usage. Use I_BillingDocument CDS view. Access pricing via I_BillingDocPricingElement.',
    simplificationId: 'S4TWL-DM-035',
  },
  {
    id: 'SIMPL-DM-036',
    category: 'Data Model',
    severity: 'medium',
    title: 'VBRP billing document item changes',
    description: 'VBRP (billing document item) has structural changes including MATNR length extension.',
    pattern: /\bVBRP\b/i,
    patternType: 'source',
    remediation: 'Review VBRP field usage. Use I_BillingDocumentItem CDS view. Note MATNR length change.',
    simplificationId: 'S4TWL-DM-036',
  },
  {
    id: 'SIMPL-DM-037',
    category: 'Data Model',
    severity: 'high',
    title: 'PRCD_ELEMENTS pricing condition table',
    description: 'PRCD_ELEMENTS is the new central pricing conditions table replacing KONV/KONP/KONH. All pricing condition data is stored here.',
    pattern: /\bPRCD_ELEMENTS\b/i,
    patternType: 'source',
    remediation: 'PRCD_ELEMENTS is the target table. Use appropriate CDS views (I_SlsDocPricingElement, I_PurgDocPricingElement) for access.',
    simplificationId: 'S4TWL-DM-037',
  },
  {
    id: 'SIMPL-DM-038',
    category: 'Data Model',
    severity: 'medium',
    title: 'NAST output management table replaced',
    description: 'NAST (output messages) is replaced by BRF+ based output management. NAST remains as compatibility view for some scenarios.',
    pattern: /\bNAST\b/i,
    patternType: 'source',
    remediation: 'Migrate output determination to BRF+ framework. Use PPF (Post Processing Framework) actions for output.',
    simplificationId: 'S4TWL-DM-038',
  },
  {
    id: 'SIMPL-DM-039',
    category: 'Data Model',
    severity: 'medium',
    title: 'TNAPR output type configuration replaced',
    description: 'TNAPR (output type programs/forms) is replaced by BRF+ output configuration. Classic condition-based output is deprecated.',
    pattern: /\bTNAPR\b/i,
    patternType: 'source',
    remediation: 'Configure output types in BRF+ based output management. Migrate form assignments to new framework.',
    simplificationId: 'S4TWL-DM-039',
  },
  {
    id: 'SIMPL-DM-040',
    category: 'Data Model',
    severity: 'medium',
    title: 'EBAN purchase requisition changes',
    description: 'EBAN (purchase requisition) has structural changes in S/4HANA. MATNR extended to 40 characters.',
    pattern: /\bEBAN\b/i,
    patternType: 'source',
    remediation: 'Review EBAN field usage. Use I_PurchaseRequisitionItem CDS view. Note MATNR length change.',
    simplificationId: 'S4TWL-DM-040',
  },
  {
    id: 'SIMPL-DM-041',
    category: 'Data Model',
    severity: 'high',
    title: 'MATNR field length change to 40 characters',
    description: 'Material number (MATNR) field is extended from 18 to 40 characters across all tables. This affects all custom code that uses fixed-length declarations for MATNR.',
    pattern: /\bMATNR\b.*\b(CHAR18|C\(18\)|TYPE\s+MATNR)\b|\bTYPE\s+MATNR\b/i,
    patternType: 'source',
    remediation: 'Review all MATNR declarations. Use TYPE reference to data element (MATNR) rather than fixed length. Update all interfaces and file layouts.',
    simplificationId: 'S4TWL-DM-041',
  },
  {
    id: 'SIMPL-DM-042',
    category: 'Data Model',
    severity: 'high',
    title: 'Condition contract tables changed',
    description: 'Condition contract tables (WCOCO, WCOCOD) are restructured in S/4HANA for the new condition contract management.',
    pattern: /\b(WCOCO|WCOCOD|WCOC_|WB2_)\w*/i,
    patternType: 'source',
    remediation: 'Use new condition contract management APIs. Review condition contract data model changes.',
    simplificationId: 'S4TWL-DM-042',
  },
  {
    id: 'SIMPL-DM-043',
    category: 'Data Model',
    severity: 'medium',
    title: 'MARC plant data for material changes',
    description: 'MARC (plant data for material) has structural changes. MRP fields reorganized for MRP Live.',
    pattern: /\bMARC\b/i,
    patternType: 'source',
    remediation: 'Review MARC field usage against S/4HANA data model. Use I_ProductPlant CDS view for new developments.',
    simplificationId: 'S4TWL-DM-043',
  },
  {
    id: 'SIMPL-DM-044',
    category: 'Data Model',
    severity: 'medium',
    title: 'MARA material master changes',
    description: 'MARA (material master general data) has structural changes. MATNR extended to 40 characters.',
    pattern: /\bMARA\b/i,
    patternType: 'source',
    remediation: 'Review MARA field usage. Use I_Product CDS view or API_PRODUCT_SRV for new developments.',
    simplificationId: 'S4TWL-DM-044',
  },
  {
    id: 'SIMPL-DM-045',
    category: 'Data Model',
    severity: 'high',
    title: 'AUFK order master data changes',
    description: 'AUFK (order master) has structural changes. Internal order fields reorganized; some deprecated in favor of ACDOCA integration.',
    pattern: /\bAUFK\b/i,
    patternType: 'source',
    remediation: 'Review AUFK field usage. Use I_InternalOrder CDS view. CO order postings are in ACDOCA.',
    simplificationId: 'S4TWL-DM-045',
  },
];
